\hypertarget{bsp__uart_8h_source}{}\doxysection{bsp\+\_\+uart.\+h}
\label{bsp__uart_8h_source}\index{shared/bsp/bsp\_uart.h@{shared/bsp/bsp\_uart.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/****************************************************************************}}
\DoxyCodeLine{2 \textcolor{comment}{ *                                                                          *}}
\DoxyCodeLine{3 \textcolor{comment}{ *  Copyright (C) 2022 RoboMaster.                                          *}}
\DoxyCodeLine{4 \textcolor{comment}{ *  Illini RoboMaster @ University of Illinois at Urbana-\/Champaign          *}}
\DoxyCodeLine{5 \textcolor{comment}{ *                                                                          *}}
\DoxyCodeLine{6 \textcolor{comment}{ *  This program is free software: you can redistribute it and/or modify    *}}
\DoxyCodeLine{7 \textcolor{comment}{ *  it under the terms of the GNU General Public License as published by    *}}
\DoxyCodeLine{8 \textcolor{comment}{ *  the Free Software Foundation, either version 3 of the License, or       *}}
\DoxyCodeLine{9 \textcolor{comment}{ *  (at your option) any later version.                                     *}}
\DoxyCodeLine{10 \textcolor{comment}{ *                                                                          *}}
\DoxyCodeLine{11 \textcolor{comment}{ *  This program is distributed in the hope that it will be useful,         *}}
\DoxyCodeLine{12 \textcolor{comment}{ *  but WITHOUT ANY WARRANTY; without even the implied warranty of          *}}
\DoxyCodeLine{13 \textcolor{comment}{ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the           *}}
\DoxyCodeLine{14 \textcolor{comment}{ *  GNU General Public License for more details.                            *}}
\DoxyCodeLine{15 \textcolor{comment}{ *                                                                          *}}
\DoxyCodeLine{16 \textcolor{comment}{ *  You should have received a copy of the GNU General Public License       *}}
\DoxyCodeLine{17 \textcolor{comment}{ *  along with this program. If not, see <http://www.gnu.org/licenses/>.    *}}
\DoxyCodeLine{18 \textcolor{comment}{ *                                                                          *}}
\DoxyCodeLine{19 \textcolor{comment}{ ****************************************************************************/}}
\DoxyCodeLine{20 }
\DoxyCodeLine{21 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{22 }
\DoxyCodeLine{23 \textcolor{preprocessor}{\#include <map>}}
\DoxyCodeLine{24 }
\DoxyCodeLine{25 \textcolor{preprocessor}{\#include "{}usart.h"{}}}
\DoxyCodeLine{26 }
\DoxyCodeLine{27 \textcolor{keyword}{namespace }bsp \{}
\DoxyCodeLine{28 }
\DoxyCodeLine{29 \textcolor{keyword}{class }\mbox{\hyperlink{classbsp_1_1UART}{UART}} \{}
\DoxyCodeLine{30  \textcolor{keyword}{public}:}
\DoxyCodeLine{36   \textcolor{keyword}{explicit} \mbox{\hyperlink{classbsp_1_1UART_a0c202ba6e7ba9f1453f10044201cfdc2}{UART}}(UART\_HandleTypeDef* huart);}
\DoxyCodeLine{37 }
\DoxyCodeLine{41   \textcolor{keyword}{virtual} \mbox{\hyperlink{classbsp_1_1UART_a59463bcd941532b983d54df1f823637a}{\string~UART}}();}
\DoxyCodeLine{42 }
\DoxyCodeLine{49   \textcolor{keywordtype}{void} \mbox{\hyperlink{classbsp_1_1UART_a6f789d89310a8c23dd85b297625099f4}{SetupRx}}(uint32\_t rx\_buffer\_size);}
\DoxyCodeLine{50 }
\DoxyCodeLine{57   \textcolor{keywordtype}{void} \mbox{\hyperlink{classbsp_1_1UART_a5823a04d8896ba972f93e83f9a6a8eef}{SetupTx}}(uint32\_t tx\_buffer\_size);}
\DoxyCodeLine{58 }
\DoxyCodeLine{70   \textcolor{keyword}{template} <\textcolor{keywordtype}{bool} FromISR = false>}
\DoxyCodeLine{71   int32\_t \mbox{\hyperlink{classbsp_1_1UART_a610521ea671cb9984b990c26bc59c75d}{Read}}(uint8\_t** data);}
\DoxyCodeLine{72 }
\DoxyCodeLine{86   \textcolor{keyword}{template} <\textcolor{keywordtype}{bool} FromISR = false>}
\DoxyCodeLine{87   int32\_t \mbox{\hyperlink{classbsp_1_1UART_acec513015b2d19960503952ccf1b7348}{Write}}(\textcolor{keyword}{const} uint8\_t* data, uint32\_t length);}
\DoxyCodeLine{88 }
\DoxyCodeLine{89  \textcolor{keyword}{protected}:}
\DoxyCodeLine{93   \textcolor{keywordtype}{void} \mbox{\hyperlink{classbsp_1_1UART_ad567cefc6c9b208af52280e19822d4ed}{TxCompleteCallback}}();}
\DoxyCodeLine{94 }
\DoxyCodeLine{98   \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{classbsp_1_1UART_a16c44650edc76251d0ec35e1d1e33e0e}{RxCompleteCallback}}();}
\DoxyCodeLine{99 }
\DoxyCodeLine{100   UART\_HandleTypeDef* huart\_;}
\DoxyCodeLine{101   \textcolor{comment}{/* rx */}}
\DoxyCodeLine{102   uint32\_t rx\_size\_;}
\DoxyCodeLine{103   uint8\_t* rx\_data\_[2];}
\DoxyCodeLine{104   uint8\_t rx\_index\_;}
\DoxyCodeLine{105   \textcolor{comment}{/* tx */}}
\DoxyCodeLine{106   uint32\_t tx\_size\_;}
\DoxyCodeLine{107   uint32\_t tx\_pending\_;}
\DoxyCodeLine{108   uint8\_t* tx\_write\_;}
\DoxyCodeLine{109   uint8\_t* tx\_read\_;}
\DoxyCodeLine{110 }
\DoxyCodeLine{111  \textcolor{keyword}{private}:}
\DoxyCodeLine{112   \textcolor{keyword}{friend} \textcolor{keywordtype}{void} RxCompleteCallbackWrapper(UART\_HandleTypeDef* huart);}
\DoxyCodeLine{113   \textcolor{keyword}{friend} \textcolor{keywordtype}{void} TxCompleteCallbackWrapper(UART\_HandleTypeDef* huart);}
\DoxyCodeLine{114 }
\DoxyCodeLine{115   \textcolor{keyword}{static} std::map<UART\_HandleTypeDef*, UART*> ptr\_map;}
\DoxyCodeLine{116   \textcolor{keyword}{static} \mbox{\hyperlink{classbsp_1_1UART}{UART}}* FindInstance(UART\_HandleTypeDef* huart);}
\DoxyCodeLine{117 \};}
\DoxyCodeLine{118 }
\DoxyCodeLine{119 \} \textcolor{comment}{/* namespace bsp */}}

\end{DoxyCode}
