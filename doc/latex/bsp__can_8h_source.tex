\hypertarget{bsp__can_8h_source}{}\doxysection{bsp\+\_\+can.\+h}
\label{bsp__can_8h_source}\index{shared/bsp/bsp\_can.h@{shared/bsp/bsp\_can.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/****************************************************************************}}
\DoxyCodeLine{2 \textcolor{comment}{ *                                                                          *}}
\DoxyCodeLine{3 \textcolor{comment}{ *  Copyright (C) 2022 RoboMaster.                                          *}}
\DoxyCodeLine{4 \textcolor{comment}{ *  Illini RoboMaster @ University of Illinois at Urbana-\/Champaign          *}}
\DoxyCodeLine{5 \textcolor{comment}{ *                                                                          *}}
\DoxyCodeLine{6 \textcolor{comment}{ *  This program is free software: you can redistribute it and/or modify    *}}
\DoxyCodeLine{7 \textcolor{comment}{ *  it under the terms of the GNU General Public License as published by    *}}
\DoxyCodeLine{8 \textcolor{comment}{ *  the Free Software Foundation, either version 3 of the License, or       *}}
\DoxyCodeLine{9 \textcolor{comment}{ *  (at your option) any later version.                                     *}}
\DoxyCodeLine{10 \textcolor{comment}{ *                                                                          *}}
\DoxyCodeLine{11 \textcolor{comment}{ *  This program is distributed in the hope that it will be useful,         *}}
\DoxyCodeLine{12 \textcolor{comment}{ *  but WITHOUT ANY WARRANTY; without even the implied warranty of          *}}
\DoxyCodeLine{13 \textcolor{comment}{ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the           *}}
\DoxyCodeLine{14 \textcolor{comment}{ *  GNU General Public License for more details.                            *}}
\DoxyCodeLine{15 \textcolor{comment}{ *                                                                          *}}
\DoxyCodeLine{16 \textcolor{comment}{ *  You should have received a copy of the GNU General Public License       *}}
\DoxyCodeLine{17 \textcolor{comment}{ *  along with this program. If not, see <http://www.gnu.org/licenses/>.    *}}
\DoxyCodeLine{18 \textcolor{comment}{ *                                                                          *}}
\DoxyCodeLine{19 \textcolor{comment}{ ****************************************************************************/}}
\DoxyCodeLine{20 }
\DoxyCodeLine{21 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{22 }
\DoxyCodeLine{23 \textcolor{preprocessor}{\#include <map>}}
\DoxyCodeLine{24 }
\DoxyCodeLine{25 \textcolor{preprocessor}{\#include "{}bsp\_error\_handler.h"{}}}
\DoxyCodeLine{26 \textcolor{preprocessor}{\#include "{}can.h"{}}}
\DoxyCodeLine{27 }
\DoxyCodeLine{28 \textcolor{preprocessor}{\#define MAX\_CAN\_DATA\_SIZE 8}}
\DoxyCodeLine{29 \textcolor{preprocessor}{\#define MAX\_CAN\_DEVICES 12}}
\DoxyCodeLine{30 }
\DoxyCodeLine{31 \textcolor{keyword}{namespace }bsp \{}
\DoxyCodeLine{32 }
\DoxyCodeLine{33 \textcolor{comment}{/* can callback function pointer */}}
\DoxyCodeLine{34 \textcolor{keyword}{typedef} void (*can\_rx\_callback\_t)(\textcolor{keyword}{const} uint8\_t data[], \textcolor{keywordtype}{void}* args);}
\DoxyCodeLine{35 }
\DoxyCodeLine{36 \textcolor{keyword}{class }\mbox{\hyperlink{classbsp_1_1CAN}{CAN}} \{}
\DoxyCodeLine{37  \textcolor{keyword}{public}:}
\DoxyCodeLine{44   \mbox{\hyperlink{classbsp_1_1CAN_a5548afe06a08b1289aba19f56212d3df}{CAN}}(CAN\_HandleTypeDef* hcan, uint32\_t start\_id, \textcolor{keywordtype}{bool} is\_master = \textcolor{keyword}{true});}
\DoxyCodeLine{52   \textcolor{keywordtype}{bool} \mbox{\hyperlink{classbsp_1_1CAN_a6ff1a38e647daa22bf6d55307d957094}{Uses}}(CAN\_HandleTypeDef* hcan) \{ \textcolor{keywordflow}{return} hcan\_ == hcan; \}}
\DoxyCodeLine{53 }
\DoxyCodeLine{63   \textcolor{keywordtype}{int} \mbox{\hyperlink{classbsp_1_1CAN_a3d011cd877092e0a7efff232c4b134a9}{RegisterRxCallback}}(uint32\_t std\_id, can\_rx\_callback\_t callback, \textcolor{keywordtype}{void}* args = NULL);}
\DoxyCodeLine{64 }
\DoxyCodeLine{74   \textcolor{keywordtype}{int} \mbox{\hyperlink{classbsp_1_1CAN_a0083adb6ff5ae8d63f6c01ee4ecc82ef}{Transmit}}(uint16\_t \textcolor{keywordtype}{id}, \textcolor{keyword}{const} uint8\_t data[], uint32\_t length);}
\DoxyCodeLine{75 }
\DoxyCodeLine{81   \textcolor{keywordtype}{void} \mbox{\hyperlink{classbsp_1_1CAN_adfd11400c56d8cbda00fda25987a7abe}{RxCallback}}();}
\DoxyCodeLine{82 }
\DoxyCodeLine{83  \textcolor{keyword}{private}:}
\DoxyCodeLine{84   \textcolor{keywordtype}{void} ConfigureFilter(\textcolor{keywordtype}{bool} is\_master);}
\DoxyCodeLine{85 }
\DoxyCodeLine{86   CAN\_HandleTypeDef* hcan\_;}
\DoxyCodeLine{87   \textcolor{keyword}{const} uint32\_t start\_id\_;}
\DoxyCodeLine{88 }
\DoxyCodeLine{89   can\_rx\_callback\_t rx\_callbacks\_[MAX\_CAN\_DEVICES] = \{0\};}
\DoxyCodeLine{90   \textcolor{keywordtype}{void}* rx\_args\_[MAX\_CAN\_DEVICES] = \{NULL\};}
\DoxyCodeLine{91 }
\DoxyCodeLine{92   \textcolor{keyword}{static} std::map<CAN\_HandleTypeDef*, CAN*> ptr\_map;}
\DoxyCodeLine{93   \textcolor{keyword}{static} \mbox{\hyperlink{classbsp_1_1CAN_a5548afe06a08b1289aba19f56212d3df}{CAN}}* FindInstance(CAN\_HandleTypeDef* hcan);}
\DoxyCodeLine{94   \textcolor{keyword}{static} \textcolor{keywordtype}{bool} HandleExists(CAN\_HandleTypeDef* hcan);}
\DoxyCodeLine{95   \textcolor{keyword}{static} \textcolor{keywordtype}{void} RxFIFO0MessagePendingCallback(CAN\_HandleTypeDef* hcan);}
\DoxyCodeLine{96 \};}
\DoxyCodeLine{97 }
\DoxyCodeLine{98 \} \textcolor{comment}{/* namespace bsp */}}

\end{DoxyCode}
