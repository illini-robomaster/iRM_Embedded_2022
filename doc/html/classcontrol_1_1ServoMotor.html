<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>iRM Embedded 2022: control::ServoMotor Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">iRM Embedded 2022
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>control</b></li><li class="navelem"><a class="el" href="classcontrol_1_1ServoMotor.html">ServoMotor</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classcontrol_1_1ServoMotor-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">control::ServoMotor Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>wrapper class for motor to enable the motor shaft angle to be precisely controlled with possible external gearbox present  
 <a href="classcontrol_1_1ServoMotor.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="motor_8h_source.html">motor.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a736a9ee40a378c0f0b714ab1544a1de0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcontrol_1_1ServoMotor.html#a736a9ee40a378c0f0b714ab1544a1de0">ServoMotor</a> (<a class="el" href="structcontrol_1_1servo__t.html">servo_t</a> servo, float proximity=0.05)</td></tr>
<tr class="memdesc:a736a9ee40a378c0f0b714ab1544a1de0"><td class="mdescLeft">&#160;</td><td class="mdescRight">base constructor  <a href="classcontrol_1_1ServoMotor.html#a736a9ee40a378c0f0b714ab1544a1de0">More...</a><br /></td></tr>
<tr class="separator:a736a9ee40a378c0f0b714ab1544a1de0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8816253f442fabd9ec2af3873e8f0372"><td class="memItemLeft" align="right" valign="top">servo_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcontrol_1_1ServoMotor.html#a8816253f442fabd9ec2af3873e8f0372">SetTarget</a> (const float target, bool override=false)</td></tr>
<tr class="memdesc:a8816253f442fabd9ec2af3873e8f0372"><td class="mdescLeft">&#160;</td><td class="mdescRight">set next target for servomotor, will have no effect if last set target has not been achieved  <a href="classcontrol_1_1ServoMotor.html#a8816253f442fabd9ec2af3873e8f0372">More...</a><br /></td></tr>
<tr class="separator:a8816253f442fabd9ec2af3873e8f0372"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad603befb84abb76461c6d0a75a64321c"><td class="memItemLeft" align="right" valign="top">servo_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcontrol_1_1ServoMotor.html#ad603befb84abb76461c6d0a75a64321c">SetTarget</a> (const float target, const servo_mode_t mode, bool override=false)</td></tr>
<tr class="memdesc:ad603befb84abb76461c6d0a75a64321c"><td class="mdescLeft">&#160;</td><td class="mdescRight">set next target for servomotor, will have no effect if last set target has not been achieved  <a href="classcontrol_1_1ServoMotor.html#ad603befb84abb76461c6d0a75a64321c">More...</a><br /></td></tr>
<tr class="separator:ad603befb84abb76461c6d0a75a64321c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef3f0f32dfc4fca3d1c8c68ba2706f84"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcontrol_1_1ServoMotor.html#aef3f0f32dfc4fca3d1c8c68ba2706f84">SetSpeed</a> (const float speed)</td></tr>
<tr class="memdesc:aef3f0f32dfc4fca3d1c8c68ba2706f84"><td class="mdescLeft">&#160;</td><td class="mdescRight">set turning speed of motor when moving, should always be positive, negative inputs will be ignored  <a href="classcontrol_1_1ServoMotor.html#aef3f0f32dfc4fca3d1c8c68ba2706f84">More...</a><br /></td></tr>
<tr class="separator:aef3f0f32dfc4fca3d1c8c68ba2706f84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50cef52187514938743ec0ce0331bbcb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcontrol_1_1ServoMotor.html#a50cef52187514938743ec0ce0331bbcb">CalcOutput</a> ()</td></tr>
<tr class="memdesc:a50cef52187514938743ec0ce0331bbcb"><td class="mdescLeft">&#160;</td><td class="mdescRight">calculate the output of the motors under current configuration  <a href="classcontrol_1_1ServoMotor.html#a50cef52187514938743ec0ce0331bbcb">More...</a><br /></td></tr>
<tr class="separator:a50cef52187514938743ec0ce0331bbcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2e2246e02510eab6d567e1891866791"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcontrol_1_1ServoMotor.html#ae2e2246e02510eab6d567e1891866791">Holding</a> () const</td></tr>
<tr class="memdesc:ae2e2246e02510eab6d567e1891866791"><td class="mdescLeft">&#160;</td><td class="mdescRight">if the motor is holding  <a href="classcontrol_1_1ServoMotor.html#ae2e2246e02510eab6d567e1891866791">More...</a><br /></td></tr>
<tr class="separator:ae2e2246e02510eab6d567e1891866791"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fb7226011f25b56752d16a352ab7122"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcontrol_1_1ServoMotor.html#a2fb7226011f25b56752d16a352ab7122">GetTarget</a> () const</td></tr>
<tr class="memdesc:a2fb7226011f25b56752d16a352ab7122"><td class="mdescLeft">&#160;</td><td class="mdescRight">get current servomotor target, in [rad]  <a href="classcontrol_1_1ServoMotor.html#a2fb7226011f25b56752d16a352ab7122">More...</a><br /></td></tr>
<tr class="separator:a2fb7226011f25b56752d16a352ab7122"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa23d0cec8d18633aa2d5f09ab0e66d97"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcontrol_1_1ServoMotor.html#aa23d0cec8d18633aa2d5f09ab0e66d97">RegisterJamCallback</a> (jam_callback_t callback, float effort_threshold, uint8_t detect_period=50)</td></tr>
<tr class="memdesc:aa23d0cec8d18633aa2d5f09ab0e66d97"><td class="mdescLeft">&#160;</td><td class="mdescRight">register a callback function that would be called if motor is jammed  <a href="classcontrol_1_1ServoMotor.html#aa23d0cec8d18633aa2d5f09ab0e66d97">More...</a><br /></td></tr>
<tr class="separator:aa23d0cec8d18633aa2d5f09ab0e66d97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a7ed43abf57b635007052c407ed8675"><td class="memItemLeft" align="right" valign="top"><a id="a6a7ed43abf57b635007052c407ed8675" name="a6a7ed43abf57b635007052c407ed8675"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>PrintData</b> () const</td></tr>
<tr class="memdesc:a6a7ed43abf57b635007052c407ed8675"><td class="mdescLeft">&#160;</td><td class="mdescRight">print out motor data <br /></td></tr>
<tr class="separator:a6a7ed43abf57b635007052c407ed8675"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cf673e64e68a6a6ba5961bed76da345"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcontrol_1_1ServoMotor.html#a9cf673e64e68a6a6ba5961bed76da345">GetTheta</a> () const</td></tr>
<tr class="memdesc:a9cf673e64e68a6a6ba5961bed76da345"><td class="mdescLeft">&#160;</td><td class="mdescRight">get motor angle, in [rad]  <a href="classcontrol_1_1ServoMotor.html#a9cf673e64e68a6a6ba5961bed76da345">More...</a><br /></td></tr>
<tr class="separator:a9cf673e64e68a6a6ba5961bed76da345"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc2db2da18b05b4aa1ade9de551522a8"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcontrol_1_1ServoMotor.html#afc2db2da18b05b4aa1ade9de551522a8">GetThetaDelta</a> (const float target) const</td></tr>
<tr class="memdesc:afc2db2da18b05b4aa1ade9de551522a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">get angle difference (target - actual), in [rad]  <a href="classcontrol_1_1ServoMotor.html#afc2db2da18b05b4aa1ade9de551522a8">More...</a><br /></td></tr>
<tr class="separator:afc2db2da18b05b4aa1ade9de551522a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7540691d653b6f56bb0fd75d8af1cdfc"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcontrol_1_1ServoMotor.html#a7540691d653b6f56bb0fd75d8af1cdfc">GetOmega</a> () const</td></tr>
<tr class="memdesc:a7540691d653b6f56bb0fd75d8af1cdfc"><td class="mdescLeft">&#160;</td><td class="mdescRight">get angular velocity, in [rad / s]  <a href="classcontrol_1_1ServoMotor.html#a7540691d653b6f56bb0fd75d8af1cdfc">More...</a><br /></td></tr>
<tr class="separator:a7540691d653b6f56bb0fd75d8af1cdfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e68a9777cb9686eb8c7d1c2f9980c9b"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcontrol_1_1ServoMotor.html#a9e68a9777cb9686eb8c7d1c2f9980c9b">GetOmegaDelta</a> (const float target) const</td></tr>
<tr class="memdesc:a9e68a9777cb9686eb8c7d1c2f9980c9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">get angular velocity difference (target - actual), in [rad / s]  <a href="classcontrol_1_1ServoMotor.html#a9e68a9777cb9686eb8c7d1c2f9980c9b">More...</a><br /></td></tr>
<tr class="separator:a9e68a9777cb9686eb8c7d1c2f9980c9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28ad384bb271e5043fa922eb8df36779"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcontrol_1_1ServoMotor.html#a28ad384bb271e5043fa922eb8df36779">UpdateData</a> (const uint8_t data[])</td></tr>
<tr class="memdesc:a28ad384bb271e5043fa922eb8df36779"><td class="mdescLeft">&#160;</td><td class="mdescRight">update the current theta for the servomotor  <a href="classcontrol_1_1ServoMotor.html#a28ad384bb271e5043fa922eb8df36779">More...</a><br /></td></tr>
<tr class="separator:a28ad384bb271e5043fa922eb8df36779"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >wrapper class for motor to enable the motor shaft angle to be precisely controlled with possible external gearbox present </p>
<dl class="section note"><dt>Note</dt><dd>this is a calculation class that calculate the motor output for desired output, but it does not directly command a motor to turn. </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a736a9ee40a378c0f0b714ab1544a1de0" name="a736a9ee40a378c0f0b714ab1544a1de0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a736a9ee40a378c0f0b714ab1544a1de0">&#9670;&nbsp;</a></span>ServoMotor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">control::ServoMotor::ServoMotor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcontrol_1_1servo__t.html">servo_t</a>&#160;</td>
          <td class="paramname"><em>servo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>proximity</em> = <code>0.05</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>base constructor </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">servo</td><td>initialization struct, refer to type <a class="el" href="structcontrol_1_1servo__t.html" title="structure used when servomotor instance is initialized">servo_t</a> </td></tr>
    <tr><td class="paramname">proximity</td><td>critical difference angle for the motor to stop turining when approaching target </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a50cef52187514938743ec0ce0331bbcb" name="a50cef52187514938743ec0ce0331bbcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50cef52187514938743ec0ce0331bbcb">&#9670;&nbsp;</a></span>CalcOutput()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void control::ServoMotor::CalcOutput </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>calculate the output of the motors under current configuration </p>
<dl class="section note"><dt>Note</dt><dd>this function will not command the motor, it only calculate the desired input </dd></dl>

</div>
</div>
<a id="a7540691d653b6f56bb0fd75d8af1cdfc" name="a7540691d653b6f56bb0fd75d8af1cdfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7540691d653b6f56bb0fd75d8af1cdfc">&#9670;&nbsp;</a></span>GetOmega()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float control::ServoMotor::GetOmega </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get angular velocity, in [rad / s] </p>
<dl class="section return"><dt>Returns</dt><dd>angular velocity </dd></dl>

</div>
</div>
<a id="a9e68a9777cb9686eb8c7d1c2f9980c9b" name="a9e68a9777cb9686eb8c7d1c2f9980c9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e68a9777cb9686eb8c7d1c2f9980c9b">&#9670;&nbsp;</a></span>GetOmegaDelta()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float control::ServoMotor::GetOmegaDelta </td>
          <td>(</td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>target</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get angular velocity difference (target - actual), in [rad / s] </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>target angular velocity, in [rad / s]</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>difference angular velocity </dd></dl>

</div>
</div>
<a id="a2fb7226011f25b56752d16a352ab7122" name="a2fb7226011f25b56752d16a352ab7122"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fb7226011f25b56752d16a352ab7122">&#9670;&nbsp;</a></span>GetTarget()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float control::ServoMotor::GetTarget </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get current servomotor target, in [rad] </p>
<dl class="section return"><dt>Returns</dt><dd>current target angle, range between [0, 2PI] </dd></dl>

</div>
</div>
<a id="a9cf673e64e68a6a6ba5961bed76da345" name="a9cf673e64e68a6a6ba5961bed76da345"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cf673e64e68a6a6ba5961bed76da345">&#9670;&nbsp;</a></span>GetTheta()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float control::ServoMotor::GetTheta </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get motor angle, in [rad] </p>
<dl class="section return"><dt>Returns</dt><dd>radian angle, range between [0, 2PI] </dd></dl>

</div>
</div>
<a id="afc2db2da18b05b4aa1ade9de551522a8" name="afc2db2da18b05b4aa1ade9de551522a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc2db2da18b05b4aa1ade9de551522a8">&#9670;&nbsp;</a></span>GetThetaDelta()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float control::ServoMotor::GetThetaDelta </td>
          <td>(</td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>target</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get angle difference (target - actual), in [rad] </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>target angle, in [rad]</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>angle difference, range between [-PI, PI] </dd></dl>

</div>
</div>
<a id="ae2e2246e02510eab6d567e1891866791" name="ae2e2246e02510eab6d567e1891866791"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2e2246e02510eab6d567e1891866791">&#9670;&nbsp;</a></span>Holding()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool control::ServoMotor::Holding </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>if the motor is holding </p>
<dl class="section return"><dt>Returns</dt><dd>true the motor is holding (i.e. not turning) </dd>
<dd>
false the motor is not holding (i.e. turning) </dd></dl>

</div>
</div>
<a id="aa23d0cec8d18633aa2d5f09ab0e66d97" name="aa23d0cec8d18633aa2d5f09ab0e66d97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa23d0cec8d18633aa2d5f09ab0e66d97">&#9670;&nbsp;</a></span>RegisterJamCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void control::ServoMotor::RegisterJamCallback </td>
          <td>(</td>
          <td class="paramtype">jam_callback_t&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>effort_threshold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>detect_period</em> = <code>50</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>register a callback function that would be called if motor is jammed </p>
<dl class="section note"><dt>Note</dt><dd>Jam detection uses a moving window across inputs to the motor. It uses a circular buffer of size detect_period to store history inputs and calculates a rolling average of the inputs. Everytime the average of inputs is greater than effect_threshold * 32768(maximum command a motor can accept), the jam callback function will be triggered once. The callback will only be triggered once each time the rolling average cross the threshold from lower to higher. For a standard jam callback function, refer to example motor_m3508_antijam</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">callback</td><td>callback function to be registered </td></tr>
    <tr><td class="paramname">effort_threshold</td><td>threshold for motor to be determined as jammed, ranged between (0, 1) </td></tr>
    <tr><td class="paramname">detect_period</td><td>detection window length </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aef3f0f32dfc4fca3d1c8c68ba2706f84" name="aef3f0f32dfc4fca3d1c8c68ba2706f84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef3f0f32dfc4fca3d1c8c68ba2706f84">&#9670;&nbsp;</a></span>SetSpeed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void control::ServoMotor::SetSpeed </td>
          <td>(</td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>speed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set turning speed of motor when moving, should always be positive, negative inputs will be ignored </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">speed</td><td>speed of desired motor shaft turning speed, in [rad/s] </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8816253f442fabd9ec2af3873e8f0372" name="a8816253f442fabd9ec2af3873e8f0372"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8816253f442fabd9ec2af3873e8f0372">&#9670;&nbsp;</a></span>SetTarget() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">servo_status_t control::ServoMotor::SetTarget </td>
          <td>(</td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>override</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set next target for servomotor, will have no effect if last set target has not been achieved </p>
<dl class="section note"><dt>Note</dt><dd>if motor is not holding, call to this function will have no effect unless override is true</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>next target for the motor in [rad] </td></tr>
    <tr><td class="paramname">override</td><td>if true, override current target even if motor is not holding right now </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>current turning mode of motor </dd></dl>

</div>
</div>
<a id="ad603befb84abb76461c6d0a75a64321c" name="ad603befb84abb76461c6d0a75a64321c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad603befb84abb76461c6d0a75a64321c">&#9670;&nbsp;</a></span>SetTarget() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">servo_status_t control::ServoMotor::SetTarget </td>
          <td>(</td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const servo_mode_t&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>override</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set next target for servomotor, will have no effect if last set target has not been achieved </p>
<dl class="section note"><dt>Note</dt><dd>if motor is not holding, call to this function will have no effect unless override is true</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>next target for the motor in [rad] </td></tr>
    <tr><td class="paramname">mode</td><td>servomotor turning mode override, will only have one-time effect </td></tr>
    <tr><td class="paramname">override</td><td>if true, override current target even if motor is not holding right now </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>current turning mode of motor </dd></dl>

</div>
</div>
<a id="a28ad384bb271e5043fa922eb8df36779" name="a28ad384bb271e5043fa922eb8df36779"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28ad384bb271e5043fa922eb8df36779">&#9670;&nbsp;</a></span>UpdateData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void control::ServoMotor::UpdateData </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>data</em>[]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>update the current theta for the servomotor </p>
<dl class="section note"><dt>Note</dt><dd>only used in CAN callback, do not call elsewhere</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data[]</td><td>raw data bytes </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>shared/libraries/<a class="el" href="motor_8h_source.html">motor.h</a></li>
<li>shared/libraries/motor.cc</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
